(()=>{var e={};e.id=409,e.ids=[409],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},86905:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>c,pages:()=>d,routeModule:()=>m,tree:()=>u}),t(7352),t(35866),t(37489);var s=t(23191),o=t(88716),a=t(37922),n=t.n(a),i=t(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(r,l);let u=["",{children:["/_not-found",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,37489)),"/home/zoutigo/projets/nextjs/ecole-st-augustin-v2/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],d=[],c="/_not-found/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/_not-found/page",pathname:"/_not-found",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},90445:(e,r,t)=>{Promise.resolve().then(t.bind(t,9008)),Promise.resolve().then(t.bind(t,72346)),Promise.resolve().then(t.bind(t,98618))},96495:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,12994,23)),Promise.resolve().then(t.t.bind(t,96114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,79671,23)),Promise.resolve().then(t.t.bind(t,41868,23)),Promise.resolve().then(t.t.bind(t,84759,23))},9008:(e,r,t)=>{"use strict";t.d(r,{Navbar:()=>l});var s=t(10326),o=t(90434),a=t(90772),n=t(35047);let i=[{id:1,name:"L'ecole",slug:"ecole",path:"/ecole",primary:"blue",secondary:"skyblue"},{id:2,name:"Vie Scolaire",slug:"vie-scolaire",path:"/vie-scolaire",primary:"blue",secondary:"skyblue"},{id:3,name:"Les Classes",slug:"classes",path:"/classes",primary:"blue",secondary:"skyblue"},{id:4,name:"Informations",slug:"informations",path:"/informations",primary:"blue",secondary:"skyblue"},{id:5,name:"APEL-OGEC",slug:"apel-ogec",path:"/apel-ogec",primary:"blue",secondary:"skyblue"},{id:6,name:"Espace priv\xe9",slug:"espace-prive",path:"/espace-prive",primary:"blue",secondary:"skyblue"}],l=()=>{let e=(0,n.usePathname)();return(0,s.jsxs)("header",{className:"z-10 fixed flex flex-row justify-center items-center gap-3 h-[7vh]",children:[s.jsx("div",{className:"bg-yellow-100 w-[20%]",children:" Logo"}),s.jsx("nav",{className:"w-full bg-white ",children:i.map(r=>s.jsx(a.z,{asChild:!0,variant:e===r.path?"default":"outline",className:"mx-4",children:s.jsx(o.default,{href:r.path,children:s.jsx("span",{className:"text-3xl",children:r.name})})},r.id))})]})}},90772:(e,r,t)=>{"use strict";t.d(r,{z:()=>u});var s=t(10326),o=t(17577),a=t(34214),n=t(28671),i=t(77863);let l=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=o.forwardRef(({className:e,variant:r,size:t,asChild:o=!1,...n},u)=>{let d=o?a.g7:"button";return s.jsx(d,{className:(0,i.cn)(l({variant:r,size:t,className:e})),ref:u,...n})});u.displayName="Button"},72346:(e,r,t)=>{"use strict";t.d(r,{Toaster:()=>n});var s=t(10326),o=t(14831),a=t(85999);let n=({...e})=>{let{theme:r="system"}=(0,o.F)();return s.jsx(a.x7,{theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})}},77863:(e,r,t)=>{"use strict";t.d(r,{cn:()=>a});var s=t(41135),o=t(31009);function a(...e){return(0,o.m6)((0,s.W)(e))}},37489:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>f,metadata:()=>g});var s=t(19510),o=t(85384),a=t.n(o),n=t(72038),i=t(68570);let l=(0,i.createProxy)(String.raw`/home/zoutigo/projets/nextjs/ecole-st-augustin-v2/components/ui/sonner.tsx`),{__esModule:u,$$typeof:d}=l;l.default;let c=(0,i.createProxy)(String.raw`/home/zoutigo/projets/nextjs/ecole-st-augustin-v2/components/ui/sonner.tsx#Toaster`);var p=t(4050);t(67272);var m=t(32901);let g={title:"Create Next App",description:"Generated by create next app"};async function f({children:e}){let r=await (0,p.I8)();return s.jsx(n.eA,{session:r,children:s.jsx("html",{lang:"en",children:(0,s.jsxs)("body",{className:a().className,children:[s.jsx(m.w,{}),s.jsx(c,{}),e]})})})}},4050:(e,r,t)=>{"use strict";t.d(r,{I8:()=>w,handlers:()=>x});var s=t(66096),o=t(7585),a=t(72178),n=t(8204),i=t(80772),l=t(42023),u=t.n(l),d=t(53524),c=t(7410);c.Ry({email:c.Z_({invalid_type_error:"must be an email"}).email({message:"Email is required"})}),c.Ry({password:c.Z_().min(6,{message:"Minimum of 6 characters required"})});let p=c.Ry({email:c.Z_({invalid_type_error:"must be an email"}).email({message:"Email is required"}),password:c.Z_().min(1,{message:"Password is required"})});c.Ry({email:c.Z_().email(),password:c.Z_().min(6,{message:"Minimum 6 characters required"}),name:c.Z_().min(1,{message:"Name is required"})}),c.Ry({name:c.jt(c.Z_()),grade:c.Km([d.UserGrade.ADMIN,d.UserGrade.MANAGER,d.UserGrade.MODERATOR,d.UserGrade.NONE]),email:c.jt(c.Z_().email()),password:c.jt(c.Z_().min(6)),newPassword:c.jt(c.Z_().min(6))}).refine(e=>!!e.password||!e.newPassword,{message:"New password is requeried",path:["password"]}).refine(e=>!e.password||!!e.newPassword,{message:"New password is requeried",path:["newPassword"]});let m=globalThis.prismaGlobal??new d.PrismaClient,g=async e=>{try{return await m.user.findUnique({where:{email:e}})}catch{return null}},f=async e=>{try{return await m.user.findUnique({where:{id:e}})}catch{return null}},h={providers:[(0,a.Z)({clientId:process.env.AUTH_FACEBOOK_ID,clientSecret:process.env.AUTH_FACEBOOK_SECRET}),(0,n.Z)({clientId:process.env.AUTH_GOOGLE_ID,clientSecret:process.env.AUTH_GOOGLE_SECRET}),(0,i.Z)({name:"credentials",credentials:{email:{},password:{}},authorize:async e=>{console.log("Log 1: D\xe9but de l'autorisation");let r=p.safeParse(e);if(console.log("Log 2: Champs valid\xe9s",r),r.success){let{email:e,password:t}=r.data;console.log("Log 3: Champs extraits",{email:e,password:t});try{let r=await g(e);if(console.log("Log 4: Utilisateur trouv\xe9",r),!r||!r.password)return console.log("Log 5: Utilisateur non trouv\xe9 ou sans mot de passe"),null;let s=await u().compare(t,r.password);if(console.log("Log 6: Comparaison des mots de passe",s),s)return console.log("Log 7: Mot de passe correspondant"),r;return console.log("Log 8: Mot de passe incorrect"),null}catch(e){if(console.log("Log 9: Erreur dans le bloc try",e),e instanceof c.jm)return console.log("Log 10: Erreur de validation Zod",e),null;throw console.log("Log 11: Autre erreur",e),e}}throw console.log("Log 12: Champs invalides"),Error("Invalid input")}})]},v=async e=>{try{return await m.account.findFirst({where:{userId:e}})}catch(e){return null}},{handlers:x,signIn:b,signOut:y,auth:w}=(0,s.ZP)({adapter:(0,o.N)(m),pages:{signIn:"/auth/login",error:"/auth/error"},events:{async linkAccount({user:e}){await m.user.update({where:{id:e.id},data:{emailVerified:new Date}})}},callbacks:{async signIn({user:e,account:r}){if(r?.provider!=="credentials"){let t=await g(e.email);t&&!await m.account.findFirst({where:{provider:r?.provider,providerAccountId:r?.providerAccountId,userId:t.id}})&&await m.account.create({data:{userId:t.id,provider:r?.provider,providerAccountId:r?.providerAccountId,type:r?.type,access_token:r?.access_token,token_type:r?.token_type,scope:r?.scope,id_token:r?.id_token,session_state:r?.session_state,expires_at:r?.expires_at,refresh_token:r?.refresh_token}})}return!0},session:async({session:e,token:r})=>(r.sub&&e.user&&(e.user.id=r.sub),r.role&&e.user&&(e.user.role=r.role,e.user.grade=r.role),e.user&&(e.user.name=r.name,e.user.email=r.email,e.user.isOAuth=r.isOAuth),e),async jwt({token:e}){if(!e.sub)return e;let r=await f(e.sub);if(!r)return e;let t=await v(r.id);return e.isOAuth=!!t,e.name=r.name,e.email=r.email,e.role=r.role,e}},session:{strategy:"jwt"},...h})},32901:(e,r,t)=>{"use strict";t.d(r,{w:()=>i});var s=t(68570);let o=(0,s.createProxy)(String.raw`/home/zoutigo/projets/nextjs/ecole-st-augustin-v2/components/navbar/navbar.tsx`),{__esModule:a,$$typeof:n}=o;o.default;let i=(0,s.createProxy)(String.raw`/home/zoutigo/projets/nextjs/ecole-st-augustin-v2/components/navbar/navbar.tsx#Navbar`)},7352:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{PARALLEL_ROUTE_DEFAULT_PATH:function(){return o},default:function(){return a}});let s=t(16399),o="next/dist/client/components/parallel-route-default.js";function a(){(0,s.notFound)()}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),e.exports=r.default)},67272:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,927,246],()=>t(86905));module.exports=s})();