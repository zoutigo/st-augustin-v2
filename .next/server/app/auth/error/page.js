(()=>{var e={};e.id=590,e.ids=[590],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},4447:e=>{e.exports={style:{fontFamily:"'__Poppins_12c8de', '__Poppins_Fallback_12c8de'",fontWeight:600,fontStyle:"normal"},className:"__className_12c8de"}},49750:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>c,pages:()=>d,routeModule:()=>m,tree:()=>u}),t(37571),t(63658),t(37489),t(35866);var s=t(23191),a=t(88716),n=t(37922),o=t.n(n),i=t(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(r,l);let u=["",{children:["auth",{children:["error",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,37571)),"/home/zoutigo/projets/nextjs/ecole-st-augustin-v2/app/auth/error/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,63658)),"/home/zoutigo/projets/nextjs/ecole-st-augustin-v2/app/auth/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,37489)),"/home/zoutigo/projets/nextjs/ecole-st-augustin-v2/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/zoutigo/projets/nextjs/ecole-st-augustin-v2/app/auth/error/page.tsx"],c="/auth/error/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/auth/error/page",pathname:"/auth/error",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},90445:(e,r,t)=>{Promise.resolve().then(t.bind(t,9008)),Promise.resolve().then(t.bind(t,72346)),Promise.resolve().then(t.bind(t,98618))},96495:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,12994,23)),Promise.resolve().then(t.t.bind(t,96114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,79671,23)),Promise.resolve().then(t.t.bind(t,41868,23)),Promise.resolve().then(t.t.bind(t,84759,23))},2323:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,79404,23))},35303:()=>{},9008:(e,r,t)=>{"use strict";t.d(r,{Navbar:()=>l});var s=t(10326),a=t(90434),n=t(90772),o=t(35047);let i=[{id:1,name:"L'ecole",slug:"ecole",path:"/ecole",primary:"blue",secondary:"skyblue"},{id:2,name:"Vie Scolaire",slug:"vie-scolaire",path:"/vie-scolaire",primary:"blue",secondary:"skyblue"},{id:3,name:"Les Classes",slug:"classes",path:"/classes",primary:"blue",secondary:"skyblue"},{id:4,name:"Informations",slug:"informations",path:"/informations",primary:"blue",secondary:"skyblue"},{id:5,name:"APEL-OGEC",slug:"apel-ogec",path:"/apel-ogec",primary:"blue",secondary:"skyblue"},{id:6,name:"Espace priv\xe9",slug:"espace-prive",path:"/espace-prive",primary:"blue",secondary:"skyblue"}],l=()=>{let e=(0,o.usePathname)();return(0,s.jsxs)("header",{className:"z-10 fixed flex flex-row justify-center items-center gap-3 h-[7vh]",children:[s.jsx("div",{className:"bg-yellow-100 w-[20%]",children:" Logo"}),s.jsx("nav",{className:"w-full bg-white ",children:i.map(r=>s.jsx(n.z,{asChild:!0,variant:e===r.path?"default":"outline",className:"mx-4",children:s.jsx(a.default,{href:r.path,children:s.jsx("span",{className:"text-3xl",children:r.name})})},r.id))})]})}},90772:(e,r,t)=>{"use strict";t.d(r,{z:()=>u});var s=t(10326),a=t(17577),n=t(34214),o=t(28671),i=t(77863);let l=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=a.forwardRef(({className:e,variant:r,size:t,asChild:a=!1,...o},u)=>{let d=a?n.g7:"button";return s.jsx(d,{className:(0,i.cn)(l({variant:r,size:t,className:e})),ref:u,...o})});u.displayName="Button"},72346:(e,r,t)=>{"use strict";t.d(r,{Toaster:()=>o});var s=t(10326),a=t(14831),n=t(85999);let o=({...e})=>{let{theme:r="system"}=(0,a.F)();return s.jsx(n.x7,{theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})}},77863:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var s=t(41135),a=t(31009);function n(...e){return(0,a.m6)((0,s.W)(e))}},37571:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>g});var s=t(19510);t(71159);var a=t(46697),n=t(4447),o=t.n(n),i=t(50650);let l=({label:e})=>(0,s.jsxs)("div",{className:"w-full flex flex-col items-center justify-center gap-y-4",children:[(0,s.jsxs)("h1",{className:(0,i.cn)("font-semibold  text-3xl",o().className),children:[" ","\uD83D\uDD10 Auth"]}),(0,s.jsxs)("p",{className:"text-muted-foreground text-sm",children:[e," "]})]});var u=t(670),d=t.n(u),c=t(66108);let p=({label:e,href:r})=>s.jsx(c.z,{variant:"link",className:"font-normal w-full",size:"sm",asChild:!0,children:(0,s.jsxs)(d(),{href:r,children:[e," "]})}),m=e=>(0,s.jsxs)(a.Zb,{className:"w-[400px] shadow-md",children:[s.jsx(a.Ol,{children:s.jsx(l,{label:"Oops! Something went wrong"})}),s.jsx(a.eW,{children:s.jsx(p,{href:"/auth/login",label:"Back to login"})})]}),g=e=>s.jsx(m,{})},63658:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});var s=t(19510);t(71159);let a=({children:e})=>(0,s.jsxs)("div",{className:"h-full flex items-center justify-center bg-sky-500",children:[e," "]})},37489:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>f,metadata:()=>g});var s=t(19510),a=t(85384),n=t.n(a),o=t(72038),i=t(68570);let l=(0,i.createProxy)(String.raw`/home/zoutigo/projets/nextjs/ecole-st-augustin-v2/components/ui/sonner.tsx`),{__esModule:u,$$typeof:d}=l;l.default;let c=(0,i.createProxy)(String.raw`/home/zoutigo/projets/nextjs/ecole-st-augustin-v2/components/ui/sonner.tsx#Toaster`);var p=t(4050);t(67272);var m=t(32901);let g={title:"Create Next App",description:"Generated by create next app"};async function f({children:e}){let r=await (0,p.I8)();return s.jsx(o.eA,{session:r,children:s.jsx("html",{lang:"en",children:(0,s.jsxs)("body",{className:n().className,children:[s.jsx(m.w,{}),s.jsx(c,{}),e]})})})}},4050:(e,r,t)=>{"use strict";t.d(r,{I8:()=>w,handlers:()=>x});var s=t(66096),a=t(7585),n=t(72178),o=t(8204),i=t(80772),l=t(42023),u=t.n(l),d=t(53524),c=t(7410);c.Ry({email:c.Z_({invalid_type_error:"must be an email"}).email({message:"Email is required"})}),c.Ry({password:c.Z_().min(6,{message:"Minimum of 6 characters required"})});let p=c.Ry({email:c.Z_({invalid_type_error:"must be an email"}).email({message:"Email is required"}),password:c.Z_().min(1,{message:"Password is required"})});c.Ry({email:c.Z_().email(),password:c.Z_().min(6,{message:"Minimum 6 characters required"}),name:c.Z_().min(1,{message:"Name is required"})}),c.Ry({name:c.jt(c.Z_()),grade:c.Km([d.UserGrade.ADMIN,d.UserGrade.MANAGER,d.UserGrade.MODERATOR,d.UserGrade.NONE]),email:c.jt(c.Z_().email()),password:c.jt(c.Z_().min(6)),newPassword:c.jt(c.Z_().min(6))}).refine(e=>!!e.password||!e.newPassword,{message:"New password is requeried",path:["password"]}).refine(e=>!e.password||!!e.newPassword,{message:"New password is requeried",path:["newPassword"]});let m=globalThis.prismaGlobal??new d.PrismaClient,g=async e=>{try{return await m.user.findUnique({where:{email:e}})}catch{return null}},f=async e=>{try{return await m.user.findUnique({where:{id:e}})}catch{return null}},h={providers:[(0,n.Z)({clientId:process.env.AUTH_FACEBOOK_ID,clientSecret:process.env.AUTH_FACEBOOK_SECRET}),(0,o.Z)({clientId:process.env.AUTH_GOOGLE_ID,clientSecret:process.env.AUTH_GOOGLE_SECRET}),(0,i.Z)({name:"credentials",credentials:{email:{},password:{}},authorize:async e=>{console.log("Log 1: D\xe9but de l'autorisation");let r=p.safeParse(e);if(console.log("Log 2: Champs valid\xe9s",r),r.success){let{email:e,password:t}=r.data;console.log("Log 3: Champs extraits",{email:e,password:t});try{let r=await g(e);if(console.log("Log 4: Utilisateur trouv\xe9",r),!r||!r.password)return console.log("Log 5: Utilisateur non trouv\xe9 ou sans mot de passe"),null;let s=await u().compare(t,r.password);if(console.log("Log 6: Comparaison des mots de passe",s),s)return console.log("Log 7: Mot de passe correspondant"),r;return console.log("Log 8: Mot de passe incorrect"),null}catch(e){if(console.log("Log 9: Erreur dans le bloc try",e),e instanceof c.jm)return console.log("Log 10: Erreur de validation Zod",e),null;throw console.log("Log 11: Autre erreur",e),e}}throw console.log("Log 12: Champs invalides"),Error("Invalid input")}})]},v=async e=>{try{return await m.account.findFirst({where:{userId:e}})}catch(e){return null}},{handlers:x,signIn:y,signOut:b,auth:w}=(0,s.ZP)({adapter:(0,a.N)(m),pages:{signIn:"/auth/login",error:"/auth/error"},events:{async linkAccount({user:e}){await m.user.update({where:{id:e.id},data:{emailVerified:new Date}})}},callbacks:{async signIn({user:e,account:r}){if(r?.provider!=="credentials"){let t=await g(e.email);t&&!await m.account.findFirst({where:{provider:r?.provider,providerAccountId:r?.providerAccountId,userId:t.id}})&&await m.account.create({data:{userId:t.id,provider:r?.provider,providerAccountId:r?.providerAccountId,type:r?.type,access_token:r?.access_token,token_type:r?.token_type,scope:r?.scope,id_token:r?.id_token,session_state:r?.session_state,expires_at:r?.expires_at,refresh_token:r?.refresh_token}})}return!0},session:async({session:e,token:r})=>(r.sub&&e.user&&(e.user.id=r.sub),r.role&&e.user&&(e.user.role=r.role,e.user.grade=r.role),e.user&&(e.user.name=r.name,e.user.email=r.email,e.user.isOAuth=r.isOAuth),e),async jwt({token:e}){if(!e.sub)return e;let r=await f(e.sub);if(!r)return e;let t=await v(r.id);return e.isOAuth=!!t,e.name=r.name,e.email=r.email,e.role=r.role,e}},session:{strategy:"jwt"},...h})},32901:(e,r,t)=>{"use strict";t.d(r,{w:()=>i});var s=t(68570);let a=(0,s.createProxy)(String.raw`/home/zoutigo/projets/nextjs/ecole-st-augustin-v2/components/navbar/navbar.tsx`),{__esModule:n,$$typeof:o}=a;a.default;let i=(0,s.createProxy)(String.raw`/home/zoutigo/projets/nextjs/ecole-st-augustin-v2/components/navbar/navbar.tsx#Navbar`)},66108:(e,r,t)=>{"use strict";let s,a;t.d(r,{z:()=>f});var n=t(19510),o=t(71159),i=o.forwardRef((e,r)=>{let{children:t,...s}=e,a=o.Children.toArray(t),i=a.find(d);if(i){let e=i.props.children,t=a.map(r=>r!==i?r:o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null);return(0,n.jsx)(l,{...s,ref:r,children:o.isValidElement(e)?o.cloneElement(e,void 0,t):null})}return(0,n.jsx)(l,{...s,ref:r,children:t})});i.displayName="Slot";var l=o.forwardRef((e,r)=>{let{children:t,...s}=e;if(o.isValidElement(t)){let e=function(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning;return t?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?e.props.ref:e.props.ref||e.ref}(t);return o.cloneElement(t,{...function(e,r){let t={...r};for(let s in r){let a=e[s],n=r[s];/^on[A-Z]/.test(s)?a&&n?t[s]=(...e)=>{n(...e),a(...e)}:a&&(t[s]=a):"style"===s?t[s]={...a,...n}:"className"===s&&(t[s]=[a,n].filter(Boolean).join(" "))}return{...e,...t}}(s,t.props),ref:r?function(...e){return r=>e.forEach(e=>{"function"==typeof e?e(r):null!=e&&(e.current=r)})}(r,e):e})}return o.Children.count(t)>1?o.Children.only(null):null});l.displayName="SlotClone";var u=({children:e})=>(0,n.jsx)(n.Fragment,{children:e});function d(e){return o.isValidElement(e)&&e.type===u}let c=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,p=function(){for(var e,r,t=0,s="";t<arguments.length;)(e=arguments[t++])&&(r=function e(r){var t,s,a="";if("string"==typeof r||"number"==typeof r)a+=r;else if("object"==typeof r){if(Array.isArray(r))for(t=0;t<r.length;t++)r[t]&&(s=e(r[t]))&&(a&&(a+=" "),a+=s);else for(t in r)r[t]&&(a&&(a+=" "),a+=t)}return a}(e))&&(s&&(s+=" "),s+=r);return s};var m=t(50650);let g=(s="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",a={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}},e=>{var r;if((null==a?void 0:a.variants)==null)return p(s,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:t,defaultVariants:n}=a,o=Object.keys(t).map(r=>{let s=null==e?void 0:e[r],a=null==n?void 0:n[r];if(null===s)return null;let o=c(s)||c(a);return t[r][o]}),i=e&&Object.entries(e).reduce((e,r)=>{let[t,s]=r;return void 0===s||(e[t]=s),e},{});return p(s,o,null==a?void 0:null===(r=a.compoundVariants)||void 0===r?void 0:r.reduce((e,r)=>{let{class:t,className:s,...a}=r;return Object.entries(a).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...n,...i}[r]):({...n,...i})[r]===t})?[...e,t,s]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)}),f=o.forwardRef(({className:e,variant:r,size:t,asChild:s=!1,...a},o)=>{let l=s?i:"button";return n.jsx(l,{className:(0,m.cn)(g({variant:r,size:t,className:e})),ref:o,...a})});f.displayName="Button"},46697:(e,r,t)=>{"use strict";t.d(r,{Ol:()=>i,Zb:()=>o,aY:()=>l,eW:()=>u});var s=t(19510),a=t(71159),n=t(50650);let o=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));o.displayName="Card";let i=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...r}));i.displayName="CardHeader",a.forwardRef(({className:e,...r},t)=>s.jsx("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r})).displayName="CardTitle",a.forwardRef(({className:e,...r},t)=>s.jsx("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...r})).displayName="CardDescription";let l=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,n.cn)("p-6 pt-0",e),...r}));l.displayName="CardContent";let u=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",e),...r}));u.displayName="CardFooter"},50650:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var s=t(55761),a=t(62386);function n(...e){return(0,a.m6)((0,s.W)(e))}},670:(e,r,t)=>{"use strict";let{createProxy:s}=t(68570);e.exports=s("/home/zoutigo/projets/nextjs/ecole-st-augustin-v2/node_modules/next/dist/client/link.js")},57481:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});var s=t(66621);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},67272:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,927,246,621,86],()=>t(49750));module.exports=s})();