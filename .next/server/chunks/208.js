exports.id=208,exports.ids=[208],exports.modules={75335:(e,t,s)=>{Promise.resolve().then(s.bind(s,90839)),Promise.resolve().then(s.bind(s,9008))},90839:(e,t,s)=>{"use strict";s.d(t,{ProtectedNavbar:()=>k});var a=s(10326),r=s(17577),o=s(50269),n=s(39183),d=s(32933),l=s(53982),i=s(77863);let c=o.fC,u=o.xz;o.ZA,o.Uv,o.Tr,o.Ee,r.forwardRef(({className:e,inset:t,children:s,...r},d)=>(0,a.jsxs)(o.fF,{ref:d,className:(0,i.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[s,a.jsx(n.Z,{className:"ml-auto h-4 w-4"})]})).displayName=o.fF.displayName,r.forwardRef(({className:e,...t},s)=>a.jsx(o.tu,{ref:s,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=o.tu.displayName;let f=r.forwardRef(({className:e,sideOffset:t=4,...s},r)=>a.jsx(o.Uv,{children:a.jsx(o.VY,{ref:r,sideOffset:t,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));f.displayName=o.VY.displayName;let m=r.forwardRef(({className:e,inset:t,...s},r)=>a.jsx(o.ck,{ref:r,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...s}));m.displayName=o.ck.displayName,r.forwardRef(({className:e,children:t,checked:s,...r},n)=>(0,a.jsxs)(o.oC,{ref:n,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(o.wU,{children:a.jsx(d.Z,{className:"h-4 w-4"})})}),t]})).displayName=o.oC.displayName,r.forwardRef(({className:e,children:t,...s},r)=>(0,a.jsxs)(o.Rk,{ref:r,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(o.wU,{children:a.jsx(l.Z,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=o.Rk.displayName,r.forwardRef(({className:e,inset:t,...s},r)=>a.jsx(o.__,{ref:r,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...s})).displayName=o.__.displayName,r.forwardRef(({className:e,...t},s)=>a.jsx(o.Z0,{ref:s,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=o.Z0.displayName;var p=s(4150);let x=r.forwardRef(({className:e,...t},s)=>a.jsx(p.fC,{ref:s,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));x.displayName=p.fC.displayName;let h=r.forwardRef(({className:e,...t},s)=>a.jsx(p.Ee,{ref:s,className:(0,i.cn)("aspect-square h-full w-full",e),...t}));h.displayName=p.Ee.displayName;let g=r.forwardRef(({className:e,...t},s)=>a.jsx(p.NY,{ref:s,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));g.displayName=p.NY.displayName;var v=s(44046),y=s(71810),w=s(83765);s(15424);var j=(0,s(46242).$)("1a8cef6534f3989adeb422102ad8771c4b287d2d");let b=({children:e})=>(0,a.jsxs)("span",{onClick:()=>{j()},className:"cursor-pointer",children:[e," "]}),N=()=>{let e=(0,w.x)();return(0,a.jsxs)(c,{children:[a.jsx(u,{children:(0,a.jsxs)(x,{children:[a.jsx(h,{src:e?.image||void 0}),(0,a.jsxs)(g,{className:"bg-sky-500",children:[" ",a.jsx(v.Xws,{className:"text-white"})]})]})}),a.jsx(f,{className:'"w-40 align-end',children:a.jsx(b,{children:(0,a.jsxs)(m,{children:[a.jsx(y.Z,{className:"h-4 w-4 mr-2"}),"Logout"]})})})]})};var _=s(90772),A=s(90434),C=s(35047);let k=e=>{let t=(0,C.usePathname)();return(0,a.jsxs)("nav",{className:"bg-secondary flex justify-between items-center p-4 rounded-xl w-[600px] shadow-sm",children:[(0,a.jsxs)("div",{className:"flex gap-x-2",children:[a.jsx(_.z,{asChild:!0,variant:"/client"==t?"default":"outline",children:a.jsx(A.default,{href:"/client",children:"Client"})}),a.jsx(_.z,{asChild:!0,variant:"/server"==t?"default":"outline",children:a.jsx(A.default,{href:"/server",children:"Server"})}),a.jsx(_.z,{asChild:!0,variant:"/admin"==t?"default":"outline",children:a.jsx(A.default,{href:"/admin",children:"Admin"})}),a.jsx(_.z,{asChild:!0,variant:"/settings"==t?"default":"outline",children:a.jsx(A.default,{href:"/settings",children:"Settings"})})]}),a.jsx(N,{})]})}},99983:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$ACTION_0:()=>d,logout:()=>n});var a=s(27745);s(26461);var r=s(33713),o=s(85723);let n=(0,a.registerServerReference)("6711d82fa291d17f8dcdfc74d34eeacacb8446cc",d);async function d(){await (0,r.signOut)({redirectTo:"/auth/login"})}(0,o.ensureServerEntryExports)([n]),(0,a.registerServerReference)("1a8cef6534f3989adeb422102ad8771c4b287d2d",n)},58365:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(19510);s(71159);var r=s(68570);let o=(0,r.createProxy)(String.raw`/home/zoutigo/projets/nextjs/ecole-st-augustin-v2/app/(protected)/_components/navbar.tsx`),{__esModule:n,$$typeof:d}=o;o.default;let l=(0,r.createProxy)(String.raw`/home/zoutigo/projets/nextjs/ecole-st-augustin-v2/app/(protected)/_components/navbar.tsx#ProtectedNavbar`);var i=s(32901);let c=({children:e})=>(0,a.jsxs)("div",{className:"h-full w-full flex flex-col gap-y-10 items-center justify-center bg-sky-500",children:[a.jsx(i.w,{}),a.jsx(l,{}),e," "]})},61273:(e,t,s)=>{"use strict";s.d(t,{default:()=>u});var a=s(90396),r=s(11250),o=s(52909),n=s(74987),d=s.n(n),l=s(79779),i=s(73922),c=s(10692);let u={providers:[(0,a.default)({clientId:process.env.AUTH_FACEBOOK_ID,clientSecret:process.env.AUTH_FACEBOOK_SECRET}),(0,r.default)({clientId:process.env.AUTH_GOOGLE_ID,clientSecret:process.env.AUTH_GOOGLE_SECRET}),(0,o.default)({name:"credentials",credentials:{email:{},password:{}},authorize:async e=>{console.log("Log 1: D\xe9but de l'autorisation");let t=l.LoginSchema.safeParse(e);if(console.log("Log 2: Champs valid\xe9s",t),t.success){let{email:e,password:s}=t.data;console.log("Log 3: Champs extraits",{email:e,password:s});try{let t=await (0,i.getUserByEmail)(e);if(console.log("Log 4: Utilisateur trouv\xe9",t),!t||!t.password)return console.log("Log 5: Utilisateur non trouv\xe9 ou sans mot de passe"),null;let a=await d().compare(s,t.password);if(console.log("Log 6: Comparaison des mots de passe",a),a)return console.log("Log 7: Mot de passe correspondant"),t;return console.log("Log 8: Mot de passe incorrect"),null}catch(e){if(console.log("Log 9: Erreur dans le bloc try",e),e instanceof c.ZodError)return console.log("Log 10: Erreur de validation Zod",e),null;throw console.log("Log 11: Autre erreur",e),e}}throw console.log("Log 12: Champs invalides"),Error("Invalid input")}})]}},33713:(e,t,s)=>{"use strict";s.d(t,{auth:()=>f,signIn:()=>c,signOut:()=>u});var a=s(73978),r=s(91873),o=s(61273),n=s(88296),d=s(73922),l=s(36567);let{handlers:i,signIn:c,signOut:u,auth:f}=(0,a.default)({adapter:(0,r.PrismaAdapter)(n.db),pages:{signIn:"/auth/login",error:"/auth/error"},events:{async linkAccount({user:e}){await n.db.user.update({where:{id:e.id},data:{emailVerified:new Date}})}},callbacks:{async signIn({user:e,account:t}){if(t?.provider!=="credentials"){let s=await (0,d.getUserByEmail)(e.email);s&&!await n.db.account.findFirst({where:{provider:t?.provider,providerAccountId:t?.providerAccountId,userId:s.id}})&&await n.db.account.create({data:{userId:s.id,provider:t?.provider,providerAccountId:t?.providerAccountId,type:t?.type,access_token:t?.access_token,token_type:t?.token_type,scope:t?.scope,id_token:t?.id_token,session_state:t?.session_state,expires_at:t?.expires_at,refresh_token:t?.refresh_token}})}return!0},session:async({session:e,token:t})=>(t.sub&&e.user&&(e.user.id=t.sub),t.role&&e.user&&(e.user.role=t.role,e.user.grade=t.role),e.user&&(e.user.name=t.name,e.user.email=t.email,e.user.isOAuth=t.isOAuth),e),async jwt({token:e}){if(!e.sub)return e;let t=await (0,d.getUserById)(e.sub);if(!t)return e;let s=await (0,l.getAccountByUserId)(t.id);return e.isOAuth=!!s,e.name=t.name,e.email=t.email,e.role=t.role,e}},session:{strategy:"jwt"},...o.default})},36567:(e,t,s)=>{"use strict";s.d(t,{getAccountByUserId:()=>r});var a=s(88296);let r=async e=>{try{return await a.db.account.findFirst({where:{userId:e}})}catch(e){return null}}}};