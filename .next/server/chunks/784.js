exports.id=784,exports.ids=[784],exports.modules={90445:(e,r,s)=>{Promise.resolve().then(s.bind(s,9008)),Promise.resolve().then(s.bind(s,72346)),Promise.resolve().then(s.bind(s,98618))},96495:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,12994,23)),Promise.resolve().then(s.t.bind(s,96114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,79671,23)),Promise.resolve().then(s.t.bind(s,41868,23)),Promise.resolve().then(s.t.bind(s,84759,23))},9008:(e,r,s)=>{"use strict";s.d(r,{Navbar:()=>l});var t=s(10326),a=s(90434),i=s(90772),o=s(35047);let n=[{id:1,name:"L'ecole",slug:"ecole",path:"/ecole",primary:"blue",secondary:"skyblue"},{id:2,name:"Vie Scolaire",slug:"vie-scolaire",path:"/vie-scolaire",primary:"blue",secondary:"skyblue"},{id:3,name:"Les Classes",slug:"classes",path:"/classes",primary:"blue",secondary:"skyblue"},{id:4,name:"Informations",slug:"informations",path:"/informations",primary:"blue",secondary:"skyblue"},{id:5,name:"APEL-OGEC",slug:"apel-ogec",path:"/apel-ogec",primary:"blue",secondary:"skyblue"},{id:6,name:"Espace priv\xe9",slug:"espace-prive",path:"/espace-prive",primary:"blue",secondary:"skyblue"}],l=()=>{let e=(0,o.usePathname)();return(0,t.jsxs)("header",{className:"z-10 fixed flex flex-row justify-center items-center gap-3 h-[7vh]",children:[t.jsx("div",{className:"bg-yellow-100 w-[20%]",children:" Logo"}),t.jsx("nav",{className:"w-full bg-white ",children:n.map(r=>t.jsx(i.z,{asChild:!0,variant:e===r.path?"default":"outline",className:"mx-4",children:t.jsx(a.default,{href:r.path,children:t.jsx("span",{className:"text-3xl",children:r.name})})},r.id))})]})}},90772:(e,r,s)=>{"use strict";s.d(r,{z:()=>d});var t=s(10326),a=s(17577),i=s(34214),o=s(28671),n=s(77863);let l=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:r,size:s,asChild:a=!1,...o},d)=>{let u=a?i.g7:"button";return t.jsx(u,{className:(0,n.cn)(l({variant:r,size:s,className:e})),ref:d,...o})});d.displayName="Button"},72346:(e,r,s)=>{"use strict";s.d(r,{Toaster:()=>o});var t=s(10326),a=s(14831),i=s(85999);let o=({...e})=>{let{theme:r="system"}=(0,a.F)();return t.jsx(i.x7,{theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})}},83765:(e,r,s)=>{"use strict";s.d(r,{x:()=>a});var t=s(98618);let a=()=>{let e=(0,t.kP)();return e.data?.user}},77863:(e,r,s)=>{"use strict";s.d(r,{cn:()=>i});var t=s(41135),a=s(31009);function i(...e){return(0,a.m6)((0,t.W)(e))}},37489:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>h,metadata:()=>g});var t=s(19510),a=s(85384),i=s.n(a),o=s(72038),n=s(68570);let l=(0,n.createProxy)(String.raw`/home/zoutigo/projets/nextjs/ecole-st-augustin-v2/components/ui/sonner.tsx`),{__esModule:d,$$typeof:u}=l;l.default;let c=(0,n.createProxy)(String.raw`/home/zoutigo/projets/nextjs/ecole-st-augustin-v2/components/ui/sonner.tsx#Toaster`);var m=s(4050);s(67272);var p=s(32901);let g={title:"Create Next App",description:"Generated by create next app"};async function h({children:e}){let r=await (0,m.I8)();return t.jsx(o.eA,{session:r,children:t.jsx("html",{lang:"en",children:(0,t.jsxs)("body",{className:i().className,children:[t.jsx(p.w,{}),t.jsx(c,{}),e]})})})}},4050:(e,r,s)=>{"use strict";s.d(r,{I8:()=>x,handlers:()=>b});var t=s(66096),a=s(7585),i=s(72178),o=s(8204),n=s(80772),l=s(42023),d=s.n(l),u=s(53524),c=s(7410);c.Ry({email:c.Z_({invalid_type_error:"must be an email"}).email({message:"Email is required"})}),c.Ry({password:c.Z_().min(6,{message:"Minimum of 6 characters required"})});let m=c.Ry({email:c.Z_({invalid_type_error:"must be an email"}).email({message:"Email is required"}),password:c.Z_().min(1,{message:"Password is required"})});c.Ry({email:c.Z_().email(),password:c.Z_().min(6,{message:"Minimum 6 characters required"}),name:c.Z_().min(1,{message:"Name is required"})}),c.Ry({name:c.jt(c.Z_()),grade:c.Km([u.UserGrade.ADMIN,u.UserGrade.MANAGER,u.UserGrade.MODERATOR,u.UserGrade.NONE]),email:c.jt(c.Z_().email()),password:c.jt(c.Z_().min(6)),newPassword:c.jt(c.Z_().min(6))}).refine(e=>!!e.password||!e.newPassword,{message:"New password is requeried",path:["password"]}).refine(e=>!e.password||!!e.newPassword,{message:"New password is requeried",path:["newPassword"]});let p=globalThis.prismaGlobal??new u.PrismaClient,g=async e=>{try{return await p.user.findUnique({where:{email:e}})}catch{return null}},h=async e=>{try{return await p.user.findUnique({where:{id:e}})}catch{return null}},v={providers:[(0,i.Z)({clientId:process.env.AUTH_FACEBOOK_ID,clientSecret:process.env.AUTH_FACEBOOK_SECRET}),(0,o.Z)({clientId:process.env.AUTH_GOOGLE_ID,clientSecret:process.env.AUTH_GOOGLE_SECRET}),(0,n.Z)({name:"credentials",credentials:{email:{},password:{}},authorize:async e=>{console.log("Log 1: D\xe9but de l'autorisation");let r=m.safeParse(e);if(console.log("Log 2: Champs valid\xe9s",r),r.success){let{email:e,password:s}=r.data;console.log("Log 3: Champs extraits",{email:e,password:s});try{let r=await g(e);if(console.log("Log 4: Utilisateur trouv\xe9",r),!r||!r.password)return console.log("Log 5: Utilisateur non trouv\xe9 ou sans mot de passe"),null;let t=await d().compare(s,r.password);if(console.log("Log 6: Comparaison des mots de passe",t),t)return console.log("Log 7: Mot de passe correspondant"),r;return console.log("Log 8: Mot de passe incorrect"),null}catch(e){if(console.log("Log 9: Erreur dans le bloc try",e),e instanceof c.jm)return console.log("Log 10: Erreur de validation Zod",e),null;throw console.log("Log 11: Autre erreur",e),e}}throw console.log("Log 12: Champs invalides"),Error("Invalid input")}})]},w=async e=>{try{return await p.account.findFirst({where:{userId:e}})}catch(e){return null}},{handlers:b,signIn:y,signOut:f,auth:x}=(0,t.ZP)({adapter:(0,a.N)(p),pages:{signIn:"/auth/login",error:"/auth/error"},events:{async linkAccount({user:e}){await p.user.update({where:{id:e.id},data:{emailVerified:new Date}})}},callbacks:{async signIn({user:e,account:r}){if(r?.provider!=="credentials"){let s=await g(e.email);s&&!await p.account.findFirst({where:{provider:r?.provider,providerAccountId:r?.providerAccountId,userId:s.id}})&&await p.account.create({data:{userId:s.id,provider:r?.provider,providerAccountId:r?.providerAccountId,type:r?.type,access_token:r?.access_token,token_type:r?.token_type,scope:r?.scope,id_token:r?.id_token,session_state:r?.session_state,expires_at:r?.expires_at,refresh_token:r?.refresh_token}})}return!0},session:async({session:e,token:r})=>(r.sub&&e.user&&(e.user.id=r.sub),r.role&&e.user&&(e.user.role=r.role,e.user.grade=r.role),e.user&&(e.user.name=r.name,e.user.email=r.email,e.user.isOAuth=r.isOAuth),e),async jwt({token:e}){if(!e.sub)return e;let r=await h(e.sub);if(!r)return e;let s=await w(r.id);return e.isOAuth=!!s,e.name=r.name,e.email=r.email,e.role=r.role,e}},session:{strategy:"jwt"},...v})},32901:(e,r,s)=>{"use strict";s.d(r,{w:()=>n});var t=s(68570);let a=(0,t.createProxy)(String.raw`/home/zoutigo/projets/nextjs/ecole-st-augustin-v2/components/navbar/navbar.tsx`),{__esModule:i,$$typeof:o}=a;a.default;let n=(0,t.createProxy)(String.raw`/home/zoutigo/projets/nextjs/ecole-st-augustin-v2/components/navbar/navbar.tsx#Navbar`)},73922:(e,r,s)=>{"use strict";s.d(r,{getUserByEmail:()=>a,getUserById:()=>i});var t=s(88296);let a=async e=>{try{return await t.db.user.findUnique({where:{email:e}})}catch{return null}},i=async e=>{try{return await t.db.user.findUnique({where:{id:e}})}catch{return null}}},88296:(e,r,s)=>{"use strict";s.d(r,{db:()=>a});var t=s(53524);let a=globalThis.prismaGlobal??new t.PrismaClient},79779:(e,r,s)=>{"use strict";s.d(r,{LoginSchema:()=>o,RegisterSchema:()=>n,ResetSchema:()=>i});var t=s(53524),a=s(10692);let i=a.object({email:a.string({invalid_type_error:"must be an email"}).email({message:"Email is required"})});a.object({password:a.string().min(6,{message:"Minimum of 6 characters required"})});let o=a.object({email:a.string({invalid_type_error:"must be an email"}).email({message:"Email is required"}),password:a.string().min(1,{message:"Password is required"})}),n=a.object({email:a.string().email(),password:a.string().min(6,{message:"Minimum 6 characters required"}),name:a.string().min(1,{message:"Name is required"})});a.object({name:a.optional(a.string()),grade:a.enum([t.UserGrade.ADMIN,t.UserGrade.MANAGER,t.UserGrade.MODERATOR,t.UserGrade.NONE]),email:a.optional(a.string().email()),password:a.optional(a.string().min(6)),newPassword:a.optional(a.string().min(6))}).refine(e=>!!e.password||!e.newPassword,{message:"New password is requeried",path:["password"]}).refine(e=>!e.password||!!e.newPassword,{message:"New password is requeried",path:["newPassword"]})},57481:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a});var t=s(66621);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},67272:()=>{}};